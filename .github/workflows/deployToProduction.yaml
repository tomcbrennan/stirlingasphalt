name: Publish Website

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
name: ðŸš€ Deploy website on push
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸšš Get latest code
        uses: actions/checkout@v2

      - name: ðŸ”¨ Build Project
        run: |
          cd stirlingasphalt
          npm install
          npm run build
          composer install

      - name: ðŸ“‚ Sync files
        uses: SamKirkland/FTP-Deploy-Action@4.3.4
        with:
          server: 103.27.34.130
          username: tomdotcom@stirlingasphalt.com.au
          password: ${{ secrets.PROD_FTP_PASS }}
          server-dir: wp-content/themes/
          protocol: ftps
